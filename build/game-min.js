/*! Generated by Clam: tv-game 2015-09-11 04:55:20 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){this.src=a.src,this.preload=!!a.preload,this.autoPlay=!!a.autoPlay,this.loop=!!a.loop,this.callbackArr=[],g(a.callback)&&this.callbackArr.push(a.callback),this.isLoad=!1,this.isPlay=!1,this.isError=!1,this.def=new e,this.init()}var e=a("./deferred"),f=a("./util"),g=f.isFunction;d.prototype.init=function(){this.node=document.createElement("audio"),this.node.preload=this.preload,this.node.src=this.src,this.addEvent(),this.preload&&this.load()},d.prototype.addEvent=function(){var a=this;this.node.addEventListener("canplay",this.canplay,!1),this.node.addEventListener("error",this.error,!1),this.node.addEventListener("ended",function(){a.loop?a.play():a.isPlay=!1},!1)},d.prototype.load=function(){return this.isLoad||this.node.load(),this},d.prototype.canplay=function(){var a=this;this.isLoad=!0,this.isError=!1,this.node.removeEventListener("canplay",this.canplay),this.callbackArr.forEach(function(b){b.call(a,"success")}),this.def.resolve(a),this.autoPlay&&this.play()},d.prototype.error=function(){var a=this;throw this.isError=!0,this.callbackArr.forEach(function(b){b.call(a,"error")}),this.def.reject(a),"Audio Error "+this.src},d.prototype.addCallback=function(a){g(a)&&this.callbackArr.push(a)},d.prototype.play=function(){this.isLoad&&(this.isPlay=!0,this.node.play())},d.prototype.stop=function(){this.isPlay&&(this.isPlay=!1,this.node.pause())},d.prototype.getIsLoad=function(){return this.isLoad},d.prototype.getIsPlay=function(){return this.isPlay},d.prototype.getIsError=function(){return this.isError},d.prototype.getPromise=function(){return this.def.promise},d.prototype.freed=function(){this.node.removeEventListener("canplay",this.canplay),this.node.removeEventListener("error",this.error),this.src=null,this.preload=null,this.autoPlay=null,this.loop=null,this.callbackArr=null},d.prototype["delete"]=function(){this.freed();for(var a in this)hasOwnProperty.call(this,a)&&(this[a]=null)},b.exports=d},{"./deferred":3,"./util":14}],2:[function(a,b,c){"use strict";function d(a,b){this.colls=g(a)?a:f(a)?[a]:[],this._this=b||this,this.nameObj={},this.init()}var e=a("./util"),f=e.isObject,g=e.isArray,h=e.isFunction;d.prototype.init=function(){for(var a=this.colls,b=null,c=0,d=a.length;d>c;c++)b=a[c],b.obj1=h(b.obj1)?b.obj1.call(this._this):b.obj1,b.obj2=h(b.obj2)?b.obj2.call(this._this):b.obj2,b.scope=b.scope||20,this.nameObj[b.name]=b},d.prototype.register=function(a){return f(a)?this.colls.push(a):g(a)&&(this.colls=this.colls.concat(a)),this},d.prototype.getCollision=function(){return this.colls},d.prototype.openByName=function(a){var b=this.nameObj[a];return b&&(b.state=!0),this},d.prototype.closeByName=function(a){var b=this.nameObj[a];return b&&(b.state=!1),this},d.prototype.detect=function(){for(var a=this.colls,b=null,c=0,d=a.length;d>c;c++)b=a[c],b.state&&this._detect(b)},d.prototype.detectByName=function(a){var b=this.nameObj[a];return b&&this._detect(b),this},d.prototype._detect=function(a){var b=this,c=a.obj1,d=a.obj2;c=g(c)?c:[c],d=g(d)?d:[d];var e=0,f=0,h=0;c.forEach(function(c){c.centerPosition&&c.state&&d.forEach(function(d){d.centerPosition&&d.state&&(e=Math.abs(c.centerPosition.x-d.centerPosition.x),f=Math.abs(c.centerPosition.y-d.centerPosition.y),h=Math.sqrt(e*e+f*f),h<a.scope&&a.callback.call(b._this,c,d))})})},d.prototype["delete"]=function(){for(var a in this)hasOwnProperty.call(this,a)&&(this[a]=null)},b.exports=d},{"./util":14}],3:[function(a,b,c){function d(a){this.def=a,this.__type__="promiseA"}var e=function(){return Array.prototype.forEach?function(a,b){Array.prototype.forEach.call(a,b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}}(),f=function(){var a=this;a.state="default",a.value="",a.successCallbacklist=[],a.errorCallbacklist=[],a.promise=new d(a)};f.prototype.resolve=function(a){if("default"==this.state){this.state="resolved",this.value=a;var b=this;e(this.successCallbacklist,function(a){b.promise.success(a)})}},f.prototype.reject=function(a){if("default"==this.state){this.state="rejected",this.value=a;var b=this;e(this.errorCallbacklist,function(a){b.promise.error(a)})}},d.prototype.then=function(a,b){return this.success(a).error(b)},d.prototype.always=function(a){return this.success(a).error(a)},d.prototype.success=function(a){if("resolved"==this.def.state){var b=a.call(this,this.def.value);b&&("promiseA"==b.__type__?this.def.promise=b:this.def.value=b)}else this.def.successCallbacklist.push(a);return this.def.promise},d.prototype.error=function(a){if("rejected"==this.def.state){var b=a.call(this,this.def.value);b&&("promiseA"==b.__type__?this.def.promise=b:this.def.value=b)}else this.def.errorCallbacklist.push(a);return this.def.promise},d.prototype._getState=function(){return this.def.state},d.prototype._getValue=function(){return this.def.value},d.prototype.all=function(a){var b=this;return a=a instanceof Array?a:[a],e(a,function(c){c.always(function(){var c=!0,d=!0,f=[];e(a,function(a){d&&("default"===a._getState()?c=!1:"rejected"===a._getState()?(d=!1,f=a._getValue()):f.push(a._getValue()))}),d?c&&b.def.resolve(f):b.def.reject(f)})}),this},d.prototype.when=function(a,b,c){return a instanceof Array&&a.length||"promiseA"==a.__type__?this.all(a).success(b).error(c):(this.def.resolve(a),this.success(b).error(c))},b.exports=f},{}],4:[function(a,b,c){"use strict";function d(a,b,c,d,e){if(!a)throw"Gif node is not defined";this.node=a,this.classNames=f(b)?b:[],this.pageSize=b.length,this.nowPage=0,this.timeout=g(c)?c:2e3,this.loop=g(e)?e:!1,this.state=!0,this.pageTime=parseInt(this.timeout/1e3/this.pageSize*60,10),d&&this.run()}var e=a("./util"),f=e.isArray,g=e.isNumber,h=e.isObject,i=e.isString,j=e.loopFunc;d.prototype.removeStyle=function(){for(var a=0,b=this.classNames.length;b>a;a++)this.node.classList.remove(this.classNames[a])},d.prototype.addStyle=function(a){if(i(a))this.removeStyle(),this.node.classList.add(a);else if(h(a))for(var b in a)a.hasOwnProperty(b)&&(this.node.style[b]=a[b])},d.prototype.run=function(a){function b(){c.state&&(d===e?(i=c.classNames[c.nowPage],c.nowPage++,g(h)&&c.nowPage===f&&h--,c.nowPage=c.nowPage>f?0:c.nowPage,k=c.classNames[c.nowPage],c._run(i,k),d=0):d++,g(h)&&0===h||j(b))}var c=this,d=0,e=this.pageTime;this.nowPage=a?a:0;var f=this.pageSize-1,h=this.loop,i="",k="";return this.addStyle(this.classNames[this.nowPage]),this.state=!0,j(b),this},d.prototype._run=function(a,b){var c="";if(i(a))this.node.classList.remove(a);else if(h(a))if(h(b))for(c in a)a.hasOwnProperty(c)&&!b.hasOwnProperty(c)&&delete this.node.style[c];else for(c in a)a.hasOwnProperty(c)&&delete this.node.style[c];if(i(b))this.node.classList.add(b);else if(h(b))for(c in b)b.hasOwnProperty(c)&&(this.node.style[c]=b[c])},d.prototype.getShowFrame=function(){return this.nowPage},d.prototype.reset=function(){this.run(0)},d.prototype.clear=function(){this.stop(),this.removeStyle()},d.prototype.go=function(){return this.run(this.nowPage),this},d.prototype.stop=function(){return this.state=!1,this},b.exports=d},{"./util":14}],5:[function(a,b,c){"use strict";function d(a){this.src=a.src,this.callbackArr=[],g(a.callback)&&this.callbackArr.push(a.callback),this.isLoad=!1,this.isError=!1,this.def=new e,this.init()}var e=a("./deferred"),f=a("./util"),g=f.isFunction;d.prototype.init=function(){var a=this;this.node=new Image,this.node.addEventListener("load",function(){a.loaded()},!1),this.node.addEventListener("error",function(){a.error()},!1),this.node.src=this.src},d.prototype.loaded=function(){var a=this;this.isLoad=!0,this.isError=!1,this.callbackArr.forEach(function(b){b.call(a,"success")}),this.def.resolve(a)},d.prototype.error=function(){var a=this;throw this.isError=!0,this.callbackArr.forEach(function(b){b.call(a,"error")}),this.def.reject(a),"Image Error "+this.src},d.prototype.addCallback=function(a){g(a)&&this.callbackArr.push(a)},d.prototype.getIsLoad=function(){return this.isLoad},d.prototype.getIsError=function(){return this.isError},d.prototype.freed=function(){this.node.removeEventListener("load"),this.node.removeEventListener("error"),this.src=null,this.callbackArr=null},d.prototype.getPromise=function(){return this.def.promise},d.prototype["delete"]=function(){for(var a in this)hasOwnProperty.call(this,a)&&(this[a]=null)},b.exports=d},{"./deferred":3,"./util":14}],6:[function(a,b,c){"use strict";function d(a){this["int"]=f(a.initInt)?a.initInt:0,this.changeNum=f(a.changeNum)?a.changeNum:1}var e=a("./util"),f=e.isNumber;d.prototype.add=function(a){this["int"]+=f(a)?a:this.changeNum},d.prototype.sub=function(a){this["int"]-=f(a)?a:this.changeNum},d.prototype.getInt=function(){return this["int"]},d.prototype["delete"]=function(){this["int"]=null,this.changeNum=null},b.exports=d},{"./util":14}],7:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a)throw"target is not define";this.node=null,this.target=a,b.target&&i(b.target)&&(this.target=a.querySelectorAll(b.target)[0]),this.width=b.width||0,this.height=b.height||0,this.position=b.position||{x:0,y:0},this.centerPosition={x:this.position.x+this.width/2,y:this.position.y+this.height/2},this.templateNode=b.templateNode||"div",this.template=b.template||"",this.suffix=b.suffix||"px",this.speed=b.speed||10,this.pxToRem=b.pxToRem||1,b.className?this.className=b.className.split(" "):this.className=[],this.style=b.style||{},this.extend=g(c)?c:{},this.gif=null,this.isGo=!0,this.state=1,this.init(d),this.move()}var e=a("./gif"),f=a("./util"),g=f.isObject,h=f.isArray,i=f.isString;f.isFunction;d.prototype.init=function(a){this.node=document.createElement(this.templateNode);for(var b=0,c=this.className.length;c>b;b++)this.node.classList.add(this.className[b]);this.node.innerHTML=this.template,this.target.appendChild(this.node);for(var d in this.style)this.style.hasOwnProperty(d)&&(this.node.style[d]=this.style[d]);for(var f in this.extend)this.extend.hasOwnProperty(f)&&!this[f]&&(this[f]=this.extend[f]);if(g(a))this.gif=new e(this.node,a.change,a.time,a.state,a.loop);else if(h(a)){this.gif={};for(var b=0;b<a.length;b++)a[b].name&&(this.gif[a[b].name]=new e(this.node,a[b].change,a[b].time,a[b].state,a[b].loop))}},d.prototype.getDOMNode=function(){return this.node},d.prototype.move=function(){var a=this.position.x/this.pxToRem,b=this.position.y/this.pxToRem,c=this.suffix;this.node.style.webkitTransform="translate3d("+a+c+", "+b+c+", 0)"},d.prototype.getPosition=function(){return this.position},d.prototype.getCenterPosition=function(){return this.centerPosition},d.prototype.up=function(a){this.isGo&&(a=a?a:this.speed,this.position.y-=a,this.centerPosition.y-=a,this.move())},d.prototype.down=function(a){this.isGo&&(a=a?a:this.speed,this.position.y+=a,this.centerPosition.y+=a,this.move())},d.prototype.left=function(a){this.isGo&&(a=a?a:this.speed,this.position.x-=a,this.centerPosition.x-=a,this.move())},d.prototype.right=function(a){this.isGo&&(a=a?a:this.speed,this.position.x+=a,this.centerPosition.x+=a,this.move())},d.prototype.go=function(){this.isGo=!0},d.prototype.stop=function(){this.isGo=!1},d.prototype.getIsGo=function(){return this.isGo},d.prototype["delete"]=function(){this.node.parentNode.removeChild(this.node);for(var a in this)hasOwnProperty.call(this,a)&&(this[a]=null)},b.exports=d},{"./gif":4,"./util":14}],8:[function(a,b,c){"use strict";function d(a,b,c){this.state=l,this.beforeState=l,this.loopState=!1,this.frameCallbackArr=[],this.endCallbackArr=[],this.stopCallbackArr=[],f(a.frameCallback)&&this.frameCallbackArr.push(a.frameCallback),f(a.endCallback)&&this.endCallbackArr.push(a.endCallback),f(a.stopCallback)&&this.stopCallbackArr.push(a.stopCallback),this.isWriteTime=!!a.isWriteTime,this.isFps=!!a.isFps,this.tempStopCallback=null,this.gameTime=0,this.runTime=0,this.beginTime=null,this.endTime=null,this.beforeTime=null,this.lastTime=null,this.fpsNum=0,this.extend=g(b)?b:{},this._this=c||this,this.init()}var e=a("./util"),f=e.isFunction,g=e.isObject,h=e.loopFunc,i=1,j=0,k=2,l=-1;d.prototype.init=function(){for(var a in this.extend)this[a]=this.extend[a];if(this.isFps){var b=this.showFpsNode=document.createElement("span");b.style.position="absolute",b.style.top="0px",b.style.right="0px",b.style.background="rgba(58, 58, 58, 0.10)",b.style.fontSize="34px",b.style.color="#000000",document.body.appendChild(b)}},d.prototype.distribution=function(){switch(this.state){case j:this._endCallback();break;case i:this._frame();break;case k:this._stopCallback()}},d.prototype.loop=function(){function a(){return b.distribution(),b.state===j?void(b.loopState=!1):(h(a),b.showFps(),void(b.loopState=!0))}var b=this;return h(a),this.loopState=!0,this},d.prototype.showFps=function(){var a=this.lastTime;if(!this.isFps||!a||!this.showFpsNode)return void(this.isFps&&(this.lastTime=(new Date).getTime()));var b=(new Date).getTime();if(this.lastTime=b,10!==this.fpsNum)return void this.fpsNum++;this.fpsNum=0;var c=Math.floor(1e3/(b-a));this.showFpsNode.innerHTML=c+" fps"},d.prototype._frame=function(){this.frameCallbackArr.forEach(function(a){f(a)&&a.call(this._this,this)},this),this.beforeState=i},d.prototype._endCallback=function(){this.endCallbackArr.forEach(function(a){f(a)&&a.call(this._this,this)},this),this.beforeState=j},d.prototype._stopCallback=function(){this.beforeState!==k&&(this.stopCallbackArr.forEach(function(a){f(a)&&a.call(this._this,this)},this),this.tempStopCallback&&(this.tempStopCallback.call(this._this,this),this.tempStopCallback=null),this.beforeState=k)},d.prototype.begin=function(){return this.beforeState===j&&this.reset(),this.state=i,this.writeTime(),this},d.prototype.end=function(){return this.state=j,this.writeTime(),this},d.prototype.stop=function(a){return this.tempStopCallback=f(a)?a:null,this.state=k,this.writeTime(),this},d.prototype.reset=function(a){this.beforeState!==j||this.loopState||(this.state=l,this.beforeState=l,this.writeTime(),f(a)&&a.call(this),this.loop())},d.prototype.getState=function(){return this.state},d.prototype.writeTime=function(){if(this.isWriteTime){var a=(new Date).getTime();switch(this.state){case j:this.endTime=this.endTime?this.endTime:a,this.gameTime=this.endTime-this.beginTime,this.beforeState===i&&(this.runTime=this.runTime+a-this.beforeTime);break;case i:(this.beforeState!==i||this.beforeState!==j)&&(this.beforeTime=a,this.beginTime=this.beginTime?this.beginTime:a);break;case k:this.beforeState===i&&(this.runTime=this.runTime+a-this.beforeTime);break;case l:this.gameTime=0,this.runTime=0,this.beginTime=null,this.endTime=null,this.beforeTime=null}}},d.prototype.getTime=function(){if(!this.isWriteTime)return{gameTime:0,runTime:0};var a=(new Date).getTime();switch(this.state){case j:return{gameTime:this.gameTime,runTime:this.runTime};case i:return{gameTime:a-this.beginTime,runTime:this.runTime+a-this.beforeTime};case k:return{gameTime:a-this.beginTime,runTime:this.runTime};case l:return{gameTime:this.gameTime,runTime:this.runTime}}},d.prototype.openTime=function(){return this.isWriteTime=!0,this},d.prototype.closeTime=function(){return this.isWriteTime=!1,this},d.prototype.frame=function(a){return f(a)&&this.frameCallbackArr.push(a),this},d.prototype.registerEnd=function(a){return f(a)&&this.endCallbackArr.push(a),this},d.prototype.registerStop=function(a){return f(a)&&this.stopCallbackArr.push(a),this},d.prototype["delete"]=function(){this.isFps&&this.showFpsNode&&this.showFpsNode.parentNode.removeChild(this.showFpsNode);for(var a in this)hasOwnProperty.call(this,a)&&(this[a]=null);this.state=j},b.exports=d},{"./util":14}],9:[function(a,b,c){function d(a){if(!a||!a.stage||!a.stage.node)throw"param is error";this.config=s(a.config)?a.config:{},this.stage=f(a.stage),this.lead=null,this.setLead(a.lead),this.monster={},this.setMonsterModule(a.monster),this.track=null,this.setTrack(a.track),this.integration=null,this.setInt(a.integration),this.collision=g(a.collision,this),this.loop=h(s(a.loop)?a.loop:{},this),this.resource=null,this.setResource(a.resource),a.loop&&u(a.loop.init)&&a.loop.init.call(this.loop)}function e(a,b){for(var c in a)hasOwnProperty.call(a,c)&&(b[c]=b[c]?b[c]:a[c]);return b}function f(a){var b=new i(a.node);return a.gif&&(b.gif=new k(a.node,a.gif.change,a.gif.time)),b}function g(a,b){return new n(a,b)}function h(a,b){return new j(a,a.extend,b)}var i=a("./stage"),j=a("./loop"),k=a("./gif"),l=a("./lead"),m=a("./monsterModule"),n=a("./collision"),o=a("./track"),p=a("./integration"),q=a("./source"),r=a("./util"),s=r.isObject,t=r.isArray,u=r.isFunction;d.util=r,d.prototype["delete"]=function(){this.loop&&this.loop["delete"]&&this.loop["delete"](),this.collision&&this.collision["delete"]&&this.collision["delete"](),this.resource&&this.resource["delete"]&&this.resource["delete"]();for(var a in this.monster)hasOwnProperty.call(this.monster,a)&&this.monster[a]["delete"]();this.lead&&this.lead["delete"]&&this.lead["delete"](),this.integration&&this.integration["delete"]&&this.integration["delete"](),this.track&&this.track["delete"]&&this.track["delete"](),this.stage&&this.stage["delete"]&&this.stage["delete"]()},d.prototype.setResource=function(a){s(a)&&!this.resource&&(this.resource=new q(a,this))},d.prototype.setLead=function(a){return s(a)&&!this.lead&&this.makeLead(a),this},d.prototype.makeLead=function(a){this.lead=new l(this.stage.node,e(this.config,a.parameter),a.extend,a.gif)},d.prototype.setMonsterModule=function(a){return t(a)&&a.length&&this.makeMonster(a,this.stage),this},d.prototype.makeMonster=function(a,b){var c=this,d=this.monster;a.forEach(function(a){if(!a.name)throw"monster.name is not defined";var f=new m(a.name,b.node,e(c.config,a.parameter),a.extend,a.gif,c);d[a.name]=f,u(a.init)&&a.init.call(f)})},d.prototype.setTrack=function(a){return s(a)&&!this.track&&(this.track=new o(this.stage.node,e(this.config,a.parameter))),this},d.prototype.setInt=function(a){s(a)&&!this.integration&&(this.integration=new p(a.parameter),u(a.init)&&a.init.call(this.integration))},window.Game=d,b.exports=d},{"./collision":2,"./gif":4,"./integration":6,"./lead":7,"./loop":8,"./monsterModule":10,"./source":11,"./stage":12,"./track":13,"./util":14}],10:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){if(!a||!b)throw"param is error";this.name=a||"",this.target=b,this.singleArr=[],c.target&&l(c.target)&&(this.target=b.querySelectorAll(c.target)[0]),this.style=c.style||{},c.className?this.className=c.className.split(" "):this.className=[],this.templateNode=c.templateNode||"div",this.template=c.template||"",this.suffix=c.suffix||"px",this.speed=c.speed||30,this.pxToRem=c.pxToRem||1,this.width=c.width||0,this.height=c.height||0,this.position=c.position||{x:0,y:0},this.centerPosition={x:this.position.x+this.width/2,y:this.position.y+this.height/2},this.border=c.border||{top:0,bottom:1080,left:0,right:1920},this.detectBorder=c.detectBorder||{top:!0,bottom:!0,left:!0,right:!0},this.borderCallback=j(c.borderCallback)?c.borderCallback:function(){},this.gif=e,this._this=f||this,this.events={},this.extend=d||{}}function e(a,b,c,d){this._super=a,this.node=null,this.id=b,this.state=1,this.position={x:c.x||0,y:c.y||0},this.centerPosition={x:d.x||this._super.centerPosition.x,y:d.y||this._super.centerPosition.y},this.init()}var f=a("./gif"),g=a("./util"),h=g.isObject,i=g.isArray,j=g.isFunction,k=g.isNumber,l=g.isString;d.prototype.make=function(a){var b=(new Date).getTime();a=a?a:this.position;var c={x:a.x+this.width/2,y:a.y+this.height/2},d=new e(this,b,a,c),g=this.extend;for(var j in g)hasOwnProperty.call(g,j)&&!d[j]&&(d[j]=g[j]);if(d.gif=null,h(this.gif))d.gif=new f(d.node,this.gif.change,this.gif.time,this.gif.state,this.gif.loop);else if(i(this.gif)){d.gif={};for(var k=0;k<this.gif.length;k++)d.gif[this.gif[k].name]=new f(d.node,this.gif[k].change,this.gif[k].time,this.gif[k].state,this.gif[k].loop)}return this.singleArr.push(d),d},d.prototype.remove=function(a,b,c){var d="";d=h(a)&&a._super&&a._super.name===this.name?a.id:a;for(var e=this.singleArr,f=null,g=0,i=e.length;i>g;g++)if(f=e[g],d===f.id){f._remove(b,c);break}},d.prototype.clearSingle=function(){for(var a=this.singleArr,b=a.length-1;b>=0;b--)a[b].state||(a[b]=a[a.length-1],a.pop())},d.prototype.getSingles=function(){return this.clearSingle(),this.singleArr},d.prototype.getSinglesNum=function(){return this.singleArr.length},d.prototype.on=function(a,b){var c=this,d=[];if(j(b))d.push(b);else if(i(b))for(var e=0,f=b.length;f>e;e++){var g=b[e];j(g)&&d.push(g)}this.events[a]?this.events[a]=this.events[a].concat(d):this.events[a]=d,document.addEventListener(a,function(b){var d=b.target;if(d.getAttribute("data-monster-type")!==c.name)for(;(d=d.parentNode)&&(!d.getAttribute||d.getAttribute("data-monster-type")!==c.name););if(d){var e=c.events[a];c.getSingles().forEach(function(b){if(b.node===d)for(var c=0,f=e.length;f>c;c++)e[c].call(b._super,{target:b,type:a})})}},!1)},d.prototype["delete"]=function(){for(var a=this.singleArr.length,b=0;a>b;b++)this.singleArr[b].remove();for(var c in this)hasOwnProperty.call(this,c)&&(this[c]=null)},e.prototype.init=function(){for(var a=this.node=document.createElement(this._super.templateNode),b=this._super,c=b.style,d=0,e=b.className.length;e>d;d++)a.classList.add(b.className[d]);a.setAttribute("data-monster-type",b.name);for(var f in c)a.style[f]=c[f];this.move(),a.innerHTML=b.template,b.target.appendChild(a)},e.prototype.move=function(){var a=this.position.x/this._super.pxToRem,b=this.position.y/this._super.pxToRem,c=this._super.suffix;this.node.style.webkitTransform="translate3d("+a+c+", "+b+c+", 0)"},e.prototype.up=function(a){this.state&&(a=a?a:this._super.speed,this.position.y-=a,this.centerPosition.y-=a,this.move(),this.detectBorder())},e.prototype.down=function(a){this.state&&(a=a?a:this._super.speed,this.position.y+=a,this.centerPosition.y+=a,this.move(),this.detectBorder())},e.prototype.left=function(a){this.state&&(a=a?a:this._super.speed,this.position.x-=a,this.centerPosition.x-=a,this.move(),this.detectBorder())},e.prototype.right=function(a){this.state&&(a=a?a:this._super.speed,this.position.x+=a,this.centerPosition.x+=a,this.move(),this.detectBorder())},e.prototype.detectBorder=function(){var a=this._super.detectBorder,b=this._super.border,c=this.centerPosition.x,d=this.centerPosition.y;return a.left&&c<b.left?void this._super.borderCallback.call(this._super._this,{target:this,type:"left"}):a.bottom&&d>b.bottom?void this._super.borderCallback.call(this._super._this,{target:this,type:"bottom"}):a.right&&c>b.right?void this._super.borderCallback.call(this._super._this,{target:this,type:"right"}):void(a.top&&d<b.top&&this._super.borderCallback.call(this._super._this,{target:this,type:"top"}))},e.prototype.getPosition=function(){return this.position},e.prototype.getCenterPosition=function(){return this.centerPosition},e.prototype.getName=function(){return this._super.name},e.prototype.getDOM=function(){return this.node},e.prototype.on=function(a,b){return this.node.addEventListener(a,b,!1),this},e.prototype.remove=function(a,b){this._super.remove(this.id,a,b)},e.prototype._remove=function(a,b){var c=this;this.state=0,j(a)&&a.call(this),b=k(b)?b:1,setTimeout(function(){c.node.parentNode.removeChild(c.node);for(var a in c)hasOwnProperty.call(c,a)&&(c[a]=null);c.state=0,c=null},b)},b.exports=d},{"./gif":4,"./util":14}],11:[function(a,b,c){"use strict";function d(a,b){this.source=k(a.source)?a.source:[],this.success=l(a.success)?a.success:function(){},this.error=l(a.error)?a.error:function(){},this._this=b||this,this.tree={image:{},audio:{}},this.init()}var e=a("./deferred"),f=a("./image"),g=a("./audio"),h=a("./util"),i=h.isObject,j=h.isString,k=h.isArray,l=h.isFunction;d.prototype.init=function(){var a=this,b=new e,c=[];this.source.forEach(function(b){var d=null;if(i(b.parameter)&&b.name)switch(b.type){case"image":d=new f(b.parameter),a.tree.image[b.name]=d,c.push(d.getPromise());break;case"audio":d=new g(b.parameter).load(),a.tree.audio[b.name]=d,c.push(d.getPromise())}else j(b)&&c.push(new f({src:b}).getPromise())}),b.promise.when(c,function(b){a.success.call(a._this,b)},function(b){a.error.call(a._this,b)})},d.prototype.get=function(a,b){return a?b?this.tree[a][b]:this.tree[a]:this.tree},d.prototype["delete"]=function(){var a=this.tree;for(var b in a)if(hasOwnProperty.call(a,e)){var c=a[b];for(var d in c)hasOwnProperty.call(c,d)&&(c[d]["delete"](),c[d]=null);c=null}for(var e in this)hasOwnProperty.call(this,e)&&(this[e]=null)},b.exports=d},{"./audio":1,"./deferred":3,"./image":5,"./util":14}],12:[function(a,b,c){function d(a){if(!a)throw"node is not define";this.node=a}d.prototype["delete"]=function(){this.node=null},b.exports=d},{}],13:[function(a,b,c){function d(a,b){if(!a)throw"node is not defined";this.node=null,this.target=a,this.type=b.type||"left",this.suffix=b.suffix||"px",this.speed=b.speed||10,this.start=b.start||0,this.end=b.end||0,this.pxToRem=b.pxToRem||1,this.className=b.className||"",this.templateNode=b.templateNode||"div",this.template=b.template||"",this.style=f(b.style)?b.style:{},this.position=this.start,this.transformText="translate3d({num}, 0, 0)",this.state=!0,this.init()}var e=a("./util"),f=e.isObject;d.prototype.init=function(){if(this.node=document.createElement(this.templateNode),this.node.classList.add(this.className),this.node.innerHTML=this.template,this.target.appendChild(this.node),"left"===this.type||"right"===this.type)this.transformText="translate3d({num}, 0, 0)";else{if("top"!==this.type&&"bottom"!==this.type)throw"type is error";this.transformText="translate3d(0, {num}, 0)"}("top"===this.type||"left"===this.type)&&(this.speed=-this.speed,this.start=-this.start,this.end=-this.end,this.position=-this.position);for(var a in this.style)hasOwnProperty.call(this.style,a)&&(this.node.style[a]=this.style[a]);this.move()},d.prototype.move=function(){this.node.style.webkitTransform=this.transformText.replace(/\{num\}/g,this.position/this.pxToRem+this.suffix)},d.prototype.run=function(){if(this.state){if("top"===this.type||"left"===this.type)var a=Math.abs(this.position)-Math.abs(this.end);else a=this.position-this.end;0>a?this.position+=this.speed:this.position=this.start,this.move()}},d.prototype.go=function(){this.state=!0},d.prototype.stop=function(){this.state=!1},d.prototype["delete"]=function(){this.node.parentNode.removeChild(this.node);for(var a in this)hasOwnProperty.call(this,a)&&(this[a]=null)},b.exports=d},{"./util":14}],14:[function(a,b,c){function d(a){return function(b){return Object.prototype.toString.call(b)==="[object "+a+"]"}}var e=a("./deferred"),f={isArray:Array.isArray||d("Array"),isNumber:d("Number"),isFunction:d("Function"),isObject:d("Object"),isString:d("String"),loopFunc:window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(a){return setTimeout(a,16)},deferred:e};b.exports=f},{"./deferred":3}]},{},[9]);